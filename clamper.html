<html class="">
<head>
    <meta charset="UTF-8">
    <title>Clamper</title>
    <meta name="robots" content="noindex">
    <style>
body {
    margin: 2em;
    font: 1rem/1.3 sans-serif
}

.wrap {
    display: grid;
    gap: 2em;
    grid-template-areas:
        'settings'
        'code'
        'example'
    ;
    max-width: 90em;
    margin: auto;
}

.clamper {
    grid-area: settings;
    max-width: 30em;
    margin: 0;
}
.clamper fieldset + fieldset {
    margin-top: 1em;
}

.input {
    display: flex;
}
.input label {
    display: inline-block;
    width: 9em;
}
.input--long label {
    width: 12em;
}

input[type='text'] {
    width: 5em;
    padding: .2em;
    font: inherit;
    border: 1px solid #ccc;
}
input[type='text'][readonly] {
    background: #eee;
}
.suffix {
    padding: .2em .3em;
    background: #eee;
    border: 1px solid #ccc;
    border-left: 0
}

.code {
    grid-area: code;
    padding: 1em;
    background-color: #ffc;
    overflow-x: auto;
}

.example {
    grid-area: example;
    font-size: clamp(
        var( --fmin, 2rem ),
        1rem + var( --fdyn, 4.21vw ),
        var( --fmax, 4rem) );
}

@media( min-width: 50em) {
    .wrap {
        grid-template-areas:
        'settings code'
        'settings example';
        grid-template-rows: auto 1fr;
    }
}

    </style>
</head>
<body>
<div class="wrap">
    <form action="" class="clamper">
        <fieldset>
            <legend>Minimum</legend>
            <p class="line input">
                <label for="vp-min">Viewport Width</label>
                <input type="text" name="vp-min" id="vp-min" value="20" />
                <span class="suffix">rem</span>
            </p>
            <p class="line input">
                <label for="fs-min">Font Size</label>
                <input type="text" name="fs-min" id="fs-min" value="2" />
                <span class="suffix">rem</span>
            </p>
            <p class="line input">
                <label for="fs-min-calc">Equal to</label>
                <input type="text" name="fs-min-calc" id="fs-min-calc" readonly value="" />
                <span class="suffix">vw</span>
            </p>
        </fieldset>
        <fieldset>
            <legend>Maximum</legend>
            <p class="line input">
                <label for="vp-max">Viewport Width</label>
                <input type="text" name="vp-max" id="vp-max" value="87.5" />
                <span class="suffix">rem</span>
            </p>
            <p class="line input">
                <label for="fs-max">Font Size</label>
                <input type="text" name="fs-max" id="fs-max" value="4" />
                <span class="suffix">rem</span>
            </p>
            <p class="line input">
                <label for="fs-max-calc">Equal to</label>
                <input type="text" name="fs-max-calc" id="fs-max-calc" readonly value="" />
                <span class="suffix">vw</span>
            </p>
        </fieldset>
        <fieldset>
            <legend>Base</legend>
            <p class="line input input--long">
                <label for="fs-max">Body Font Size (1rem)</label>
                <input type="text" name="fs-base" id="fs-base" value="16" />
                <span class="suffix">px</span>
            </p>
        </fieldset>
    </form>

    <div class="code">
<pre>
@media (min-width: <span id="code-vp-min"></span>rem) and (max-width: <span id="code-vp-max"></span>rem) {
    .text {
        font-size: clamp( <span id="code-fs-min"></span>rem, <span id="code-calc"></span>vw, <span id="code-fs-max"></span>rem );
    }
}
</pre>
    </div>

    <div class="example" id="example">
        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Magni, consectetur nam. Possimus maxime tempore cum ipsam adipisci fugit velit impedit asperiores! Vero quam ipsam expedita accusamus facilis enim reiciendis vitae?</p>
    </div>
</div>

    <script>

    var clamper = {
        form: document.forms[0],
        data: {},
        min: document.querySelector( '#fs-min-calc' ),
        max: document.querySelector( '#fs-max-calc' ),
        code: {
            fs_min: document.querySelector( '#code-fs-min' ),
            fs_max: document.querySelector( '#code-fs-max' ),
            vp_min: document.querySelector( '#code-vp-min' ),
            vp_max: document.querySelector( '#code-vp-max' ),
            calc: document.querySelector( '#code-calc' ),
        },
        example: document.querySelector( '#example' ),

        getData: function() {
            let self = window.clamper,
                data = new FormData( self.form );

            for( let [name, value] of data ) {
                self.data[ name ] = value;
            }
        },

        run: function() {
            /*
            viewport 20em = 320px (1vw = 3.2px)
            fontsize 2rem = 32px
            32 / 3.2 = 10vw
            */
            let self = window.clamper,
                vp_min = ( self.data['vp-min'] * self.data['fs-base'] / 100 ),
                fs_min = ( self.data['fs-min'] * self.data['fs-base'] ),
                min    = ( fs_min - self.data['fs-base'] ) / vp_min,
                vp_max = ( self.data['vp-max'] * self.data['fs-base'] / 100 ),
                fs_max = ( self.data['fs-max'] * self.data['fs-base'] ),
                max    = ( fs_max - self.data['fs-base'] ) / vp_max,
                dyn    = ( ( min + max ) / 2 ).toFixed( 2 );

            console.log( fs_min / vp_min, fs_max / vp_max, min, max );
            self.min.value = min.toFixed( 2 );
            self.max.value = max.toFixed( 2 );

            self.code.fs_min.innerHTML = self.data['fs-min'];
            self.code.fs_max.innerHTML = self.data['fs-max'];
            self.code.vp_min.innerHTML = self.data['vp-min'];
            self.code.vp_max.innerHTML = self.data['vp-max'];
            // self.code.calc.innerHTML = ( ( min + max ) / 2 ).toFixed( 2 );
            self.code.calc.innerHTML = '1rem + ' + dyn;

            self.example.style.setProperty( '--fmin', self.data['fs-min'] + 'rem' );
            self.example.style.setProperty( '--fdyn', dyn + 'vw' );
            self.example.style.setProperty( '--fmax', self.data['fs-max'] + 'rem' );
        }
    };

    clamper.getData();
    clamper.run();

    clamper.form.addEventListener( 'keyup', function(e) {
        clamper.getData();
        clamper.run();
    } );

    </script>
</body>
</html>